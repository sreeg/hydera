<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition>

		<div class="row">

			<div class="col-lg-12">

				<p:dataTable id="allStudents" var="st" value="#{studentFilterView.students}" widgetVar="studentsTable"
					emptyMessage="No students found with given criteria" filteredValue="#{studentFilterView.filteredStudents}"
					selection="#{studentFilterView.selectedStudent}" rowKey="#{st.id}" selectionMode="single" scrollable="true" scrollHeight="600" style="outline: none;"
					paginatorTemplate="{Exporters}">
					<p:ajax event="rowSelect" update=":form:studentDialogHeader" oncomplete="PF('studentDialog').show()" />

					<f:facet name="header">
						<p:outputPanel>
							<div class="form-group marginTop20" style="display: inline-block; width: 100%; padding-right: 200px;">
								<p:inputText styleClass="form-control" id="globalFilter" onkeyup="PF('studentsTable').filter()"
									placeholder="To search enter a keyword" />
							</div>
							<div class="form-group marginTop20"
								style="display: inline-block; float: right; margin-top: -45px; margin-right: 10px; min-height: 30px; font-weight: 100;">
								<p:commandButton styleClass="buttonRed" id="toggler" type="button" value="Columns" style="float:right"
									icon="fa fa-table" />
								<p:columnToggler datasource="allStudents" trigger="toggler" />
							</div>
						</p:outputPanel>
					</f:facet>

					<f:facet name="{Exporters}">
						<h:commandLink styleClass="pull-right" ajax="false">
							<i style="font-size: 22px; color: #D13F3F; margin: 5px;" class="fa fa-file-pdf-o fa-x" title="Export to PDF"
								data-toggle="tooltipPDF" data-placement="bottom"></i>
							<p:dataExporter type="pdf" target="allStudents" fileName="Students" />
						</h:commandLink>
						<h:commandLink styleClass="pull-right" ajax="false">
							<i style="font-size: 22px; color: #188260; margin: 5px;" class="fa fa-file-excel-o fa-x" title="Export to XLS"
								data-toggle="tooltipXLS" data-placement="bottom"></i>
							<p:dataExporter type="xls" target="allStudents" fileName="Students" />
						</h:commandLink>
					</f:facet>
					<p:column filterStyle="display:none" sortBy="#{st.firstname}" filterBy="#{st.firstname}" headerText="Name">
						<h:outputText value="#{st.firstname} #{st.lastname}" />
					</p:column>

					<p:column filterStyle="display:none" sortBy="#{st.classname}" filterBy="#{st.classname}" headerText="Class name">
						<h:outputText value="#{st.classname} - #{st.sectionname}" />
					</p:column>

					<p:column headerText="Gender">
						<h:outputText value="#{st.sex}" />
					</p:column>

					<p:column filterStyle="display:none" filterBy="#{st.phone}" headerText="Father details">
						<h:outputText value="#{st.fathername}, #{st.fatheroccupation}" />
					</p:column>

					<p:column filterStyle="display:none" filterBy="#{st.doj}" headerText="Date of joining">
						<h:outputText value="#{st.doj}" />
					</p:column>

					<p:column filterStyle="display:none" filterBy="#{st.dob}" headerText="Date of birth">
						<h:outputText value="#{st.dob}" />
					</p:column>

					<p:column filterStyle="display:none" filterBy="#{st.phone}" headerText="Phone number">
						<h:outputText value="#{st.phone}" />
					</p:column>
					<p:column filterStyle="display:none" filterBy="#{st.mobile}" headerText="Mobile number">
						<h:outputText value="#{st.mobile}" />
					</p:column>
					<p:column filterStyle="display:none" filterBy="#{st.email}" headerText="Email id">
						<a href="mailto:#">#{st.email}</a>
					</p:column>
				</p:dataTable>
			</div>
		</div>
		<p:dialog header="#{studentFilterView.selectedStudent.firstname} #{studentFilterView.selectedStudent.lastname}"
			widgetVar="studentDialog" id="studentDialogHeader" modal="true" minWidth="400" showEffect="fade" hideEffect="fade">
			<p:outputPanel id="studentDetail">
				<p:outputPanel rendered="#{not empty studentFilterView.selectedStudent}">
					<div class="row">
						<div class="panel-body">
							<div class="col-lg-4">
								<i class="fa fa-user fa-5x"></i>
							</div>
							<div class="col-lg-8">
								<p>
									<h:outputText
										value="#{studentFilterView.selectedStudent.classname} - #{studentFilterView.selectedStudent.sectionname}" />
								</p>
								<h4>Address :</h4>
								<address>
									<h:outputText value="#{studentFilterView.selectedStudent.houseno}" />
									<br />
									<h:outputText value="#{studentFilterView.selectedStudent.street}" />
									<br />
									<h:outputText value="#{studentFilterView.selectedStudent.city}" />
									-
									<h:outputText value="#{studentFilterView.selectedStudent.postalCode}" />
									<br /> <abbr title="Phone">P:</abbr>
									<h:outputText value="#{studentFilterView.selectedStudent.phone}" />
									<br /> <a href="mailto:#"><h:outputText value="#{studentFilterView.selectedStudent.email}" /></a>
								</address>
							</div>
						</div>
					</div>
				</p:outputPanel>
			</p:outputPanel>
		</p:dialog>
	</ui:composition>
</h:body>
</html>