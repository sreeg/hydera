<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition>
		<p:panel header="Select staff" styleClass="marginBottom20">
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<h:outputText value="Staff Category" />
						<h:selectOneMenu styleClass="form-control" required="true" id="class"
							value="#{staffFilterView.selectedCategoryId}">
							<p:ajax listener="#{staffFilterView.onCategoryChange}" update="selectedStaff,staffDetails,formOutputPanel" />
							<f:selectItem itemLabel="Select Category" itemValue="" noSelectionOption="true" />
							<f:selectItems value="#{staffFilterView.category}" />
						</h:selectOneMenu>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<h:outputText for="selectedStaff" value="Staff Name " />
						<h:selectOneMenu styleClass="form-control" id="selectedStaff" onchange=""
							value="#{staffFilterView.selectedStaffIdByCategory}">
							<p:ajax listener="#{staffFilterView.onStaffChange}" update="staffDetails,formOutputPanel" />
							<f:selectItem itemLabel="Select Staff" itemValue="" noSelectionOption="true" />
							<f:selectItems itemValue="#{st.id}" itemLabel="#{st.firstname} #{st.lastname} " var="st"
								value="#{staffFilterView.filteredStaffsByCategory}" />
						</h:selectOneMenu>
					</div>
				</div>

			</div>

			<p:outputPanel id="staffDetails">
				<p:outputPanel rendered="#{staffFilterView.showForm}">
					<div class="row">
						<div class="col-lg-8">
							<div class="form-group">
								<p class="col-lg-3 form-control-static">
									<strong>Joining Salary</strong>
								</p>
								<p class="col-lg-3 form-control-static">&#8377; #{staffFilterView.selectedStaffByCategory.joiningsalary}</p>

								<p class="col-lg-3 form-control-static">
									<strong>Designation</strong>
								</p>
								<p class="col-lg-3 form-control-static">#{staffFilterView.selectedStaffByCategory.designation}</p>
							</div>
						</div>
					</div>
				</p:outputPanel>
			</p:outputPanel>
		</p:panel>

		<p:outputPanel id="formOutputPanel">
			<p:outputPanel rendered="#{staffFilterView.showForm}">
				<div class="row">
					<div class="col-lg-12">
						<p:panel header="Add Salary Details">
							<div class="row">
								<div class="col-lg-4">
									<div class="form-group">
										<h:outputText value="Basic Salary *" />
										<pe:inputNumber styleClass="form-controlpe" symbol="&#8377; " required="true"
											value="#{salaryBean.salary.basicsalary}" emptyValue="empty" label="BasicSalary" />
									</div>
									<div class="form-group">
										<h:outputText value="Fixed DA *" />
										<pe:inputNumber styleClass="form-controlpe" symbol="&#8377; " required="true"
											value="#{salaryBean.salary.fixedda}" label="FixedDA" />
									</div>
									<div class="form-group">
										<h:outputText value="HRA *" />
										<pe:inputNumber styleClass="form-controlpe" value="#{salaryBean.salary.hra}" required="true" symbol="&#8377; "
											label="HRA" />
									</div>
									<div class="form-group">
										<h:outputText value="Conveyance All *" />
										<pe:inputNumber styleClass="form-controlpe" symbol="&#8377; " required="true"
											value="#{salaryBean.salary.conveyanceall}" label="ConveyanceAll" />
									</div>
								</div>

								<div class="col-lg-4">
									<div class="form-group">
										<h:outputText value="Prof Tax Deduction *" />
										<pe:inputNumber styleClass="form-controlpe" value="#{salaryBean.salary.proftaxdeduction}" required="true"
											symbol="&#8377; " label="ProfTaxDeduction" />
									</div>
									<div class="form-group">
										<h:outputText value="Other Deduction *" />
										<pe:inputNumber styleClass="form-controlpe" symbol="&#8377; " required="true"
											value="#{salaryBean.salary.otherdeduction}" label="OtherDeduction" />
									</div>
									<div class="form-group">
										<h:outputText value="Loan Amount " />
										<pe:inputNumber styleClass="form-controlpe" symbol="&#8377; " value="#{salaryBean.salary.loanamount}"
											label="LoanAmount" />
									</div>
									<div class="form-group">
										<h:outputText value="PF Amount " />
										<pe:inputNumber styleClass="form-controlpe" disabled="true"
											value="#{((salaryBean.salary.basicsalary + salaryBean.salary.fixedda) * salaryBean.salary.pfrate)/100 }" id="pfamount" symbol="&#8377; "
											label="PFAmount" />
									</div>
								</div>
								<div class="col-lg-4">
									<div class="form-group">
										<h:outputText value="Mode of payment *" />
										<h:selectOneMenu styleClass="form-control" required="true" id="modeofpayment"
											value="#{salaryBean.selectedmodeofpayment}">
											<p:ajax update="sbacno" />
											<f:selectItem itemLabel="Select payment type" itemValue="" noSelectionOption="true" />
											<f:selectItems value="#{salaryBean.modeofpayment}" />
										</h:selectOneMenu>
									</div>
									<div class="form-group">
										<h:outputText value="SB A/C Number " />
										<p:inputText id="sbacno" styleClass="form-control" value="#{salaryBean.salary.sbacno}"
											label="SBACNumber" />
									</div>
									<div class="form-group">
										<h:outputText value="PF Rate " />
										<pe:inputNumber styleClass="form-controlpe" value="#{salaryBean.salary.pfrate}" onchange="" symbol="%"
											symbolPosition="s" emptyValue="sign" label="PFRate">
											<p:ajax event="blur" update="pfamount" />
										</pe:inputNumber>
									</div>
									<div class="form-group">
										<h:outputText value="PF Number " />
										<p:inputText styleClass="form-control" value="#{salaryBean.salary.pfno}" label="PFNumber" />
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-lg-6"></div>
								<h:inputHidden value="#{salaryBean.salary.employeeid}" id="hiddenId" />
							</div>
						</p:panel>
					</div>
				</div>

				<!-- /.row -->
				<div class="marginTop20">
					<p:commandButton styleClass="btn btn-primary btn-lg btn-block" value="Update" actionListener="#{salaryBean.save}"
						onclick="setHiddenValue('#{staffFilterView.selectedStaffIdByCategory}');" validateClient="true" update="@form" />
				</div>
			</p:outputPanel>
		</p:outputPanel>

		<script type="text/javascript">
			function setHiddenValue(new_value) {

				document.getElementById('createStaffSalaryForm:hiddenId').value = new_value;

			}
		</script>

	</ui:composition>
</h:body>
</html>