<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />

	<title>Payroll Management</title>

	<link href="css/bootstrap.min.css" rel="stylesheet" />
	<link href="css/sb-admin.css" rel="stylesheet" />
	<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<link type="text/css" rel="stylesheet" href="css/base.css" />

	<style type="text/css" media="print">
.ui-tabs-nav {
	display: none;
}

.ui-tabs.ui-tabs-top {
	border: none;
}

.multiplePayslips .panel-body {
	padding: 5px !important;
}

.multiplePayslips .panel {
	margin-bottom: 10px;
}

.form-group {
	margin-bottom: 0;
}

@page {
	size: potrait; /* auto is the initial value */
	/* this affects the margin in the printer settings */
	margin: 5mm 0mm;
}

body {
	margin: 0mm !important;
}

h4 {
	font-size: 0.9em;
}

p, td {
	margin: 0;
	font-size: 0.75em;
}

.thridreceipt {
	page-break-after: always;
}

#page-wrapper {
	padding: 0px !important;
}

.ui-tabs .ui-tabs-panel {
	padding: 0;
}

.panel-body {
	padding: 5px !important;
}
h1,h2,h3,h4,h5,h6 {
	margin: 5px;
}
h6 {
	font-size: 0.7em;
}
</style>

</h:head>

<body>
	<h:form id="form">

		<div id="wrapper">

			<!-- Navigation -->
			<ui:insert name="nav">
				<ui:include src="nav.xhtml">
					<ui:param name="page" value="generatestudentfee" />
				</ui:include>
			</ui:insert>

			<div id="page-wrapper">

				<div class="container-fluid">
					<!-- Page Heading -->
					<p:growl id="growl" showDetail="true" />
					<div class="row hidden-print">
						<div class="col-lg-12">
							<h1 class="page-header">Generate Student Fee Receipts</h1>
						</div>
					</div>

					<div class="panel panel-default hidden-print">
						<p:outputPanel id="topwell">
							<div class="panel-body form-group">
								<h:outputText value="#{studentFilterView.noofselecteditems} students selected." />
								<p:commandButton styleClass="marginLeft20 inlineBlock" value="Print Receipts" validateClient="true"
									actionListener="#{studentFilterView.generatefees}" icon="fa fa-print" oncomplete="window.print();"
									update="payslips" />
								<p:outputPanel id="emailPanel2" styleClass="inlineBlock" rendered="#{!systemSettingsBean.disableemail}">
									<p:commandButton styleClass="marginLeft20 inlineBlock" value="Email Receipts" validateClient="true"
										actionListener="#{studentFilterView.emailfees}" update="messagesm" icon="fa fa-envelope-o" />
								</p:outputPanel>
							</div>
						</p:outputPanel>
					</div>
					<p:messages id="messagesm" styleClass="hidden-print" showDetail="true" autoUpdate="true" closable="true" />
					<p:dataTable id="allStudents" var="st" value="#{studentFilterView.students}" widgetVar="studentsTable"
						rowSelectMode="add" styleClass="marginTop20 hidden-print" reflow="true"
						emptyMessage="No students found with given criteria" filteredValue="#{studentFilterView.filteredStudents}"
						selection="#{studentFilterView.selectedStudents}" rowKey="#{st.id}">

						<f:facet name="header">
							<div class="form-group marginTop20" style="display: inline-block; width: 100%;">
								<p:inputText styleClass="form-control" id="globalFilter" onkeyup="PF('studentsTable').filter()"
									placeholder="To search enter a keyword" />
							</div>
						</f:facet>
						<p:ajax event="rowSelect" update="form:topwell" />
						<p:ajax event="rowUnselect" update="form:topwell" />
						<p:ajax event="rowSelectCheckbox" update="form:topwell" />
						<p:ajax event="rowUnselectCheckbox" update="form:topwell" />

						<p:column selectionMode="multiple" style="width:40px;text-align:center" priority="1" />
						<p:column filterStyle="display:none" sortBy="#{st.firstname}" filterBy="#{st.firstname}" headerText="Name"
							priority="2">
							<h:outputText value="#{st.firstname} #{st.lastname}" />
						</p:column>
						<p:column filterBy="#{st.classname}" headerText="" priority="3">
							<f:facet name="filter">
								<h:selectOneMenu onchange="PF('studentsTable').filter()">
									<f:selectItem itemLabel="All Classes" itemValue="#{null}" noSelectionOption="true" />
									<f:selectItems value="#{studentFilterView.classnames}" />
								</h:selectOneMenu>
							</f:facet>
							<h:outputText value="#{st.classname}" />
						</p:column>

						<p:column headerText="Section name" priority="5">
							<h:outputText value="#{st.sectionname}" />
						</p:column>
						
						<p:column filterStyle="display:none" filterBy="#{st.phone}" headerText="Phone number" priority="6">
							<h:outputText value="#{st.phone}" />
						</p:column>
						<p:column filterStyle="display:none" filterBy="#{st.email}" headerText="Email id" priority="4">
							<a href="mailto:#">#{st.email}</a>
						</p:column>
					</p:dataTable>

					<p:dataGrid rowIndexVar="rowId" styleClass="multiplePayslips " var="ssm" value="#{studentFilterView.studentfees}"
						id="payslips" columns="1" layout="grid">
						<p:outputPanel id="feereceiptMultiple" styleClass="#{(rowId + 1) % 4 == 0 ? 'thridreceipt' :'thridreceiptNot'}">
							<div class="panel panel-default ">
								<div class="panel-body">
									<div class="col-lg-12 centered">
										<h3 style="text-align: center;">Chaitanya Vidyalaya</h3>
									</div>
									<div class="col-lg-12 centered">
										<h6>Domalguda - 500029, Contact No : 65502579, Email : chaitanyavidyalaya@gmail.com</h6>
									</div>
									<div class="col-lg-12">
										<h4 class="centered underline">Fee Receipt id - #{ssm.receiptid}</h4>
									</div>
									<div class="col-lg-12">
										<h4 class="centered">
											Payment of <strong>Rs. #{ssm.amountPaid}</strong> has been received as part of tution fee for term -
											<h:outputText value="1" rendered="#{(ssm.term1)}" />
											<h:outputText value=", 2" rendered="#{(ssm.term2)}" />
											<h:outputText value=", 3" rendered="#{(ssm.term3)}" />
											from
										</h4>
									</div>
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
											<div class="form-group">
												<p>
													<strong>Student Name</strong>
												</p>
												<p>
													<strong>Father's Name</strong>
												</p>												
												<p>
													<strong>Class Name</strong>
												</p>
												<p>
													<strong>Date of Receipt</strong>
												</p>
												<p>
													<strong>Cheque Details</strong>
												</p>
											</div>
										</div>
										<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
											<div class="form-group">
												<p class="">#{ssm.fullname}</p>
												<p class="">#{ssm.fathername}</p>
												<p class="">#{ssm.classname}</p>
												<p class="">
													<h:outputText value="#{ssm.paymentdate}">
														<f:convertDateTime pattern="dd MMMM, yyyy" />
													</h:outputText>
												</p>
												<p class="">
													<h:outputText value="#{ssm.paymentdetails}" />
												</p>
											</div>
										</div>
									</div>
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<h6 class="centered">Please Note : This is a system generated receipt and does not require a signature.</h6>
									</div>
								</div>
							</div>
						</p:outputPanel>
					</p:dataGrid>


					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /#page-wrapper -->
		</div>
		<!-- /#wrapper -->
		<!-- Bootstrap Core JavaScript -->
		<script src="js/bootstrap.min.js"></script>

	</h:form>
</body>
</html>