<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition>
		<div class="row">
			<div class="col-lg-12">
				<h3 class="">Staff by category</h3>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<p:dataTable id="allStaffs" var="st" value="#{staffFilterView.staffs}" widgetVar="staffsTable"
					emptyMessage="No staff found with given criteria" filteredValue="#{staffFilterView.filteredStaffs}" rows="20"
					paginator="true" paginatorPosition="bottom" selectionMode="single" selection="#{staffFilterView.selectedStaff}"
					rowKey="#{st.id}"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="20,25,50">
					<p:ajax event="rowSelect" update=":form:staffDialogHeader" oncomplete="PF('staffDialog').show()" />

					<p:column filterStyle="display:none" sortBy="#{st.firstname}" filterBy="#{st.firstname}" headerText="Name">
						<h:outputText value="#{st.firstname} #{st.lastname}" />
					</p:column>

					<p:column filterStyle="display:none" sortBy="#{st.designation}" filterBy="#{st.designation}"
						headerText="Designation">
						<h:outputText value="#{st.designation}" />
					</p:column>

					<p:column headerText="Gender">
						<h:outputText value="#{st.sex}" />
					</p:column>

					<p:column headerText="Category" sortBy="#{st.categoryName}">
						<h:outputText value="#{st.categoryName}" />
					</p:column>

					<p:column filterStyle="display:none" filterBy="#{st.phone}" headerText="Phone Number">
						<h:outputText value="#{st.phone}" />
					</p:column>

					<p:column filterStyle="display:none" filterBy="#{st.doj}" headerText="Date of joining">
						<h:outputText styleClass="pull-right" value="#{st.doj}" >
							<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
						</h:outputText>
					</p:column>

					<p:column filterStyle="display:none;" filterBy="#{st.dob}" headerText="Date of birth">
						<h:outputText styleClass="pull-right" value="#{st.dob}" ><f:convertDateTime pattern="dd/MM/yyyy" type="date" /></h:outputText>
					</p:column>

				</p:dataTable>

			</div>
		</div>

		<p:dialog header="#{staffFilterView.selectedStaff.firstname} #{staffFilterView.selectedStaff.lastname}"
			widgetVar="staffDialog" id="staffDialogHeader" modal="true" minWidth="400" showEffect="fade" hideEffect="fade">
			<p:outputPanel id="staffDetail">
				<p:outputPanel rendered="#{not empty staffFilterView.selectedStaff}">
					<div class="row">
						<div class="panel-body">
							<div class="col-lg-4">
								<i class="fa fa-user fa-5x"></i>
							</div>
							<div class="col-lg-8">
								<p>
									<h:outputText value="#{staffFilterView.selectedStaff.designation}" />
								</p>
								<h4>Address :</h4>
								<address>
									<h:outputText value="#{staffFilterView.selectedStaff.houseno}" />
									<br />
									<h:outputText value="#{staffFilterView.selectedStaff.street}" />
									<br />
									<h:outputText value="#{staffFilterView.selectedStaff.city}" />
									-
									<h:outputText value="#{staffFilterView.selectedStaff.postalCode}" />
									<br /> <abbr title="Phone">P:</abbr>
									<h:outputText value="#{staffFilterView.selectedStaff.phone}" />
									<br /> <a href="mailto:#"><h:outputText value="#{staffFilterView.selectedStaff.email}" /></a>
								</address>
							</div>
						</div>
					</div>
				</p:outputPanel>
			</p:outputPanel>
		</p:dialog>
	</ui:composition>
</h:body>
</html>